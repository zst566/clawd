# TASKS.md - 工作任务总览

> **⚠️ 重要规范：所有工作任务、工作安排、提醒事项均记录在此文件**
> 
> - 不再使用 memory/ 记录任务（仅记录每日流水账）
> - 新增任务 → 立即更新此文件
> - 每日工作 → 每天整理后更新此文件
> - 定期检查 → 确保无遗漏
> 
> 创建时间：2026-01-29
> 最后更新：2026-01-29

---

## 一、关于我

- **名字**: 小d 🤖
- **角色**: AI开发搭档，实用派
- **工作模式**: 每个新会话自动读取此文件，了解项目全貌

---

## 二、项目概览

### 茂名·交投-文旅平台

| 项目 | 信息 |
|------|------|
| **技术栈** | Vue 3 + Vite + Element Plus |
| **后端** | Node.js + Prisma + MySQL |
| **Deadline** | 2026-02-14 正式上线 |
| **项目路径** | `/Volumes/SanDisk2T/dv-codeBase/茂名·交投-文旅平台` |
| **合同状态** | ✅ 已签订，首款已收，发票已开（2026-01-30） |

---

## 三、项目进度总览

### Phase 1: 移动端H5页面 ✅ 完成
- 18个页面全部创建完成
- 首页、景点列表/详情、民宿列表/详情、拼车流程
- 吃在信宜、特产好礼、人工咨询、投诉建议、文旅资讯、推荐

### Phase 2: PC端配置页面 🔄 进行中
- 10个管理模块已创建
- 景点管理、民宿管理、资讯管理已创建
- 待联调

### Phase 3: 后端API 🔄 进行中
- 数据库表设计完成（新增9张表）
- Banner API 开发完成
- 待开发：景点API、民宿API、资讯API

### Phase 4: 测试优化 ⏳ 待开始

---

## 四、工作记录（按日期整理）

### 📅 2026-01-28（昨天）

#### ✅ 已完成
| 事项 | 说明 |
|------|------|
| 全国事件数据上报 | 完成 |
| 茂名文旅合同 | 完成 |
| 移动端拼车页面开发 | 4个新页面（Create、Pending、PayWait、Success） |
| 移动端发起拼车API对接 | 完成 |
| 记忆存储系统 | 推送到GitHub |
| 线上培训会议第一课 | 完成，19:30-20:30 |
| 催刘云阁续费收款 | 完成，发票已发送，款项已收到 | ✅ 已完成 |
| 广电奇安信验证码登录问题 | 解决，等广电回复重置密码 |

#### 📋 待办（部分延期到今天）
| 事项 | 说明 | 状态 |
|------|------|------|
| 与山西培训平台王总沟通方案 | 远程办公，签合同预算39k | ⏳ 待进行 |
| 茂名文旅小程序注册备案 | 本周启动 | ⏳ 待进行 |
| 买服务器 + 数据库 | 1月30-31日进行 | ⏳ 待进行 |
| 润德培训财务报表梳理 | 4年数据，按省校分校方式 | ⏳ 待进行 |
| 润德培训12月数据核对 | 银行账务 vs 收入摊销对比 | 🔴 明天完成 |

---

### 📅 2026-01-29（今天）

#### ✅ 已完成
| 事项 | 说明 |
|------|------|
| 移动端V2页面开发 | 创建吃在信宜、特产好礼、人工咨询、投诉建议、文旅资讯等7个页面 |
| PC端配置页面开发 | 创建景点管理、民宿管理、资讯管理页面 |
| 数据库表设计 | 新增9张表（AttractionCategory、Attraction、OpenHour、Homestay、HomestayRoom、ArticleCategory、Article、Banner、Feedback） |
| Banner API开发 | PC端管理API + 移动端API |
| **景点API开发** | **PC端 + 移动端（2026-01-29 新增）** |
| **民宿API开发** | **PC端 + 移动端（2026-01-29 新增）** |
| **资讯API开发** | **PC端 + 移动端（2026-01-29 新增）** |
| 创建TASKS.md | 整理所有工作记录 |
| **景点管理页面API对接** | 对接 `/api/pc/attractions` API，删除模拟数据 |
| **民宿管理页面API对接** | 对接 `/api/pc/homestays` API，删除模拟数据 |
| **资讯管理页面API对接** | 对接 `/api/pc/articles` API，删除模拟数据 |
| **新增API文件** | attraction.js、homestay.js、article.js |
| **数据库字段修复** | address varchar(191)→500，解决中文超长500错误 |

#### ✅ 今日已完成
| 事项 | 说明 |
|------|------|
| 与山西培训平台王总沟通方案 | 已完成（2026-01-29） |

#### 📋 今日待办
| 事项 | 说明 | 状态 |
|------|------|------|
| 山西培训平台小程序设计修改 | 客户积分 + 积分兑换功能 | ⏳ 待进行 |
| 润德教育12月财务数据核对 | 财务12月收入/退款 vs 收入摊销系统 | 🔴 明天完成 |
| 茂名文旅小程序注册备案 | 本周启动 | ⏳ 待进行 |
| PC端页面与后端API联调 | Banner管理页面对接 | ⏳ 待进行 |
| **图片上传功能对接** | 待实现 | ⏳ 待进行 |

---

### 📅 2026-01-30（今天）

#### ✅ 已完成
| 事项 | 说明 |
|------|------|
| 茂名文旅合同签订 | ✅ 合同已签，首款已收，发票已开 |
| 润德财务数据核对 | ✅ 已运行8类订单数据提取脚本（休学/延期/正常/继续/转班/迁移/退费） |
| **润德第二轮/第三轮核验** | ✅ 已重新输出最新数据（2026-01-30 早上） |

---

## 五、时间线（里程碑）

### 🔴 紧急（明天完成）

| 日期 | 事项 | 说明 |
|------|------|------|
| **1月30日前** | 润德教育12月财务数据核对 | 财务12月收入/退款订单 vs 收入摊销系统订单对比 |

### 🟠 重要（2月上旬）
| 日期 | 事项 |
|------|------|
| 2月1日 | 润德教育1月数据准备 |
| 2月1-3日 | 茂名文旅环境配置 |
| 2月3-8日 | 茂名文旅前端+后端开发 |
| 2月3日 | 提醒3.0系统增量同步计算 |

### 🟢 上线节点
| 日期 | 事项 |
|------|------|
| 2月9-11日 | 茂名文旅容器打包 |
| 2月12-13日 | 茂名文旅预上线测试 |
| **2月14日** | 🎯 **茂名文旅正式上线** |

---

## 六、长期待办清单

### 茂名文旅平台
- [ ] 小程序注册备案
- [ ] 买服务器 + 数据库
- [ ] 环境配置
- [ ] 前端开发（按新设计）
- [ ] 后端API开发
- [ ] 图片上传功能
- [ ] PC端页面联调
- [ ] 功能测试
- [ ] Bug修复
- [ ] 容器打包
- [ ] 预上线测试
- [ ] **2月14日正式上线**

### 其他项目
- [ ] **山西培训平台** - 客户积分功能 + 积分兑换入口设计 | ⏳ 待设计 |
  - 沟通已完成，待设计完成后落实合同（预算39k） |
  - 需修改小程序端设计，添加积分和兑换模块 |
- [ ] **润德教育12月财务核对** - 财务12月收入/退款订单 vs 收入摊销系统订单对比 | 🔴 **1月30日前** |
- [ ] **越秀区质监局投诉** - 整合意见反馈函，回复越秀区市监局 | ⏰ **2月2日前（下周一）**
- [ ] **润德培训财务报表梳理** - 4年数据，按省校分校方式 | ⏳ 待安排
- [ ] 润德教育1月数据准备 | ⏳ 待安排
- [ ] 3.0系统增量同步计算 | ⏳ 待安排
- [ ] **🔴 流云阁手机端核销问题** - 标签改变和计价异常（PC端导出时）
- [ ] **🟡 流云阁教师优惠功能** - 增加"教师优惠10元"固定金额标签，核销时修改门票价格 | ⏳ 待安排时间

---

### 🔴 Bug修复优先级

| 项目 | 问题描述 | 严重程度 | 备注 |
|------|----------|----------|------|
| **流云阁** | 手机端核销选择标签正常，PC端导出时标签改变、计价异常 | 高 | 用户已发例子，需排查数据导出逻辑 |

---

### 🟡 待安排工作

| 项目 | 说明 | 计划时间 |
|------|------|----------|
| **山西培训平台** | 客户积分功能 + 积分兑换入口设计 | 待确定 |
| **流云阁教师优惠** | 增加"教师优惠10元"固定金额标签，用于核销时修改门票价格 | 待确定 |

---

## 七、代码位置速查

| 类型 | 路径 |
|------|------|
| 移动端页面 | `apps/mobile-h5/src/views/v2/` |
| PC端页面 | `apps/pc-admin/src/views/` |
| 后端路由（PC） | `apps/backend/src/routes/pc/` |
| 后端路由（移动端） | `apps/backend/src/routes/mobile/` |
| 数据库Schema | `apps/backend/prisma/schema.prisma` |
| API设计文档 | `workspace/茂名交投-API设计.md` |

---

## 八、附录：已完成页面清单

### 移动端V2页面（18个）
```
src/views/v2/
├── home/Home.vue                    # 首页
├── attractions/
│   ├── List.vue                     # 景点列表
│   └── Detail.vue                   # 景点详情
├── homestays/
│   ├── List.vue                     # 民宿列表
│   └── Detail.vue                   # 民宿详情
├── carpool/
│   ├── Create.vue                   # 发起拼车
│   ├── Pending.vue                  # 等待匹配
│   ├── PayWait.vue                  # 等待支付
│   └── Success.vue                  # 支付成功
├── food/List.vue                    # 吃在信宜
├── shop/List.vue                    # 特产好礼
├── consult/Index.vue                # 人工咨询
├── feedback/Index.vue               # 投诉建议
├── articles/
│   ├── List.vue                     # 资讯列表
│   └── Detail.vue                   # 资讯详情
└── recommend/Index.vue              # 为你推荐
```

### PC端管理页面（10个）
```
src/views/
├── dashboard/Index.vue              # 首页仪表盘
├── home-config/Index.vue            # 首页配置
├── orders/Index.vue                 # 订单管理
├── carpools/Index.vue               # 拼车订单
├── carpool-route/
│   ├── RouteConfig.vue              # 线路配置
│   └── vehicle/VehicleConfig.vue    # 车辆配置
├── users/Index.vue                  # 用户管理
├── attractions/Index.vue            # 景点管理
├── homestays/Index.vue              # 民宿管理
└── articles/Index.vue               # 资讯管理
```

---

## 九、更新记录

| 日期 | 更新内容 | 操作人 |
|------|----------|--------|
| 2026-01-29 | 创建TASKS.md，整理1月28-29日工作记录 | 小d |
| 2026-01-30 | 茂名文旅合同已签订，首款已收，发票已开 | 小d |
