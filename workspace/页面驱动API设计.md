# 页面驱动 API 设计方案

## 一、核心思路

```
移动端页面 → 组件拆解 → 数据需求 → API 设计 → 数据模型
```

通过分析前端页面，反推后端需要提供什么数据，再设计对应的 API。

---

## 二、实施步骤

### Step 1: 页面组件拆解

对每个移动端页面进行组件级别拆解，提取：

| 组件类型 | 数据需求 | 示例 |
|---------|---------|------|
| 列表组件 | 分页参数、排序字段、筛选条件 | 列表数据 |
| 表单组件 | 提交字段、验证规则 | 新增/编辑 |
| 详情组件 | 主键ID、单条记录 | 详情页 |
| 下拉选择 | 选项数据源 | 枚举值 |
| 统计卡片 | 聚合查询 | 计数/求和 |

---

### Step 2: 数据需求清单

产出表格：

| 页面 | 组件 | 需要的字段 | 数据来源 | 备注 |
|------|------|-----------|---------|------|
| 首页 | 用户信息 | nickname, avatar | 用户表 |  |
| 首页 | 统计卡片 | orderCount, revenue | 订单表 | 聚合查询 |
| 订单列表 | 列表 | 订单号, 状态, 时间 | 订单表 | 分页+筛选 |
| 订单详情 | 详情 | 订单详情 | 订单表+商品表 | 关联查询 |

---

### Step 3: API 端点设计

根据数据需求映射到 RESTful API：

| 业务 | 操作 | API 端点 | 方法 | 参数 |
|------|------|---------|------|------|
| 用户 | 获取信息 | /api/mobile/user/profile | GET | token |
| 订单 | 列表 | /api/mobile/orders | GET | page, limit, status |
| 订单 | 详情 | /api/mobile/orders/:id | GET | id |
| 订单 | 创建 | /api/mobile/orders | POST | 订单数据 |
| 订单 | 取消 | /api/mobile/orders/:id/cancel | POST | id, reason |

---

### Step 4: 数据模型设计

从组件字段反推数据库表：

```markdown
## 订单表 (orders)
- id (主键)
- order_no (订单号)
- user_id (用户ID)
- status (状态)
- total_amount (金额)
- created_at
- updated_at
```

---

## 三、输出物

1. **组件数据映射表** - 页面 → 组件 → 字段
2. **API 文档** - 端点 + 参数 + 响应格式
3. **数据库设计** - 表结构 + 关系
4. **开发顺序** - 按页面优先级排序

---

## 四、工具推荐

- **页面分析**: Figma / Sketch → 导出组件清单
- **API 文档**: Apifox / Swagger / Postman
- **数据建模**: DBeaver / Navicat / PDMan

---

## 五、快速开始

**第一步**: 把移动端所有页面截图整理成表格

**第二步**: 对每个页面标记包含的组件类型

**第三步**: 列出每个组件需要的字段

**第四步**: 按业务模块分组，生成 API 清单

---

需要我帮你启动这个分析吗？我可以先拿现有的项目练手。
