# 2026-02-14 - 茂名文旅项目人工测试记录

## 测试人员: Zhou
## 测试范围: PC端 + 移动端全功能

---

## 📱 移动端测试结果

### ✅ 正常功能

| 功能模块 | 测试结果 | 备注 |
|---------|---------|------|
| 首页进入景点拼车 | ✅ 正常 | 页面跳转流畅 |
| 预约发起拼车页面 | ✅ 正常 | 表单显示完整 |
| 输入联系人/电话 | ✅ 正常 | 输入框可正常输入 |
| 提交预约拼车 | ✅ 正常 | 提交按钮可用 |
| 景点路线切换 | ✅ 正常 | 往返切换无问题 |
| 上车/下车地点选择 | ✅ 正常 | 地点列表加载正常 |
| 日期控制器标题切换 | ✅ 正常 | "高铁到达时间"/"高铁出发时间" 显示正确 |
| 上下车点详细地址显示 | ✅ 正常 | 不同方向地址对应正确 |
| 拼车协议打开 | ✅ 正常 | 协议弹窗可正常打开 |
| **订单详情下拉刷新** | ✅ 正常 | 下拉能正常刷新，状态跳转显示效果和数据正常 |
| **PC端修改订单状态同步** | ✅ 正常 | PC端将订单56改为"待支付"，移动端正常识别，金额显示正确 |
| **支付流程端到端测试** | ✅ 正常 | 移动端支付→填写交易单号→PC端确认→状态同步，全流程正常 |
| **订单取消与退款** | ✅ 正常 | 订单#56取消后状态显示正常，退款状态为"待退款" |

**支付流程测试详情**:
1. 移动端点击订单#56支付，填写交易单号
2. PC端刷新显示交易单号，出现绿色"确认支付"按钮
3. PC端查看：支付方式=二维码，交易单号可复制
4. PC端订单管理：金额、支付方式、状态显示正常
5. PC端点击"确认支付"后，订单状态同步更新
6. 移动端状态显示正常，与PC端一致

**取消退款测试详情**:
- 移动端：订单#56取消后，页面显示正常，退款状态为"待退款"
- PC端：订单#56状态=已取消，支付状态=已支付，操作区出现"退款"按钮
- 订单管理：操作区域也显示退款按钮，状态正常
- 状态同步：PC端和移动端状态一致，查询正常

### ❌ 发现问题

| 问题描述 | 模块 | 状态 | 处理人 |
|---------|------|------|--------|
| 选择南站→景点方向，已选高铁到达时间但提交提示未选择 | 发起拼车 | ✅ 已修复 | Kimi |
| **问题详情**: 页面已选择高铁到达时间，但提交时提示未选择。组件识别问题，系统认为有另一个组件。 | | | |

---

## 💻 PC端测试结果

### 测试方法
- 使用超级管理员账号登录
- 逐个检查左侧导航菜单所有模块
- 点击每个模块右侧所有标签页
- 观察控制台警告和报错

### ✅ 正常功能
- 所有导航菜单模块可正常访问
- 各模块页面加载正常
- 大部分功能无控制台报错

### ❌ 发现问题

| 问题描述 | 模块 | 状态 | 处理人 |
|---------|------|------|--------|
| 过滤器组件宽度不够，显示异常 | 景点管理 | ✅ 已修复 | Kimi |
| 修改协议后保存，后端返回401错误 | 协议管理 | ✅ 已修复 | Kimi |
| PC端订单管理点击退款返回404错误 | 订单管理-退款 | ✅ 已修复 | Kimi |
| 订单管理退款按钮逻辑错误：判断的是支付订单状态，应判断拼车订单状态 | 订单管理-退款逻辑 | ✅ 已修复 | Kimi |
| 移动端拼车列表取消订单后未立即刷新 | 移动端-拼车列表刷新 | ✅ 已修复 | Kimi |
| 文旅资讯列表上下限状态问题 | 资讯管理 | ✅ 已修复 | Kimi |
| PC端订单管理退款联动拼车订单状态同步 | 退款功能联动 | ✅ 已修复 | Kimi |
| 移动端待支付订单取消后返回列表，列表未立即刷新 | 移动端-拼车列表 | 🔧 修复中 | Kimi |
| 我的拼车列表：从"已取消"标签进入订单详情，返回时未停留在"已取消"标签，回到了"全部" | 移动端-拼车列表标签状态 | ✅ 已修复 | Kimi |

**401错误说明**: 保存协议时身份验证失败，可能是Token过期或权限验证逻辑问题。

---

## 📋 待办事项

- [x] 移动端发起拼车组件识别问题修复 ✅
- [x] PC端景点管理过滤器修复确认 ✅
- [x] PC端协议管理401错误修复确认 ✅
- [x] PC端订单管理退款404错误修复 ✅
- [x] 订单管理退款按钮逻辑错误修复 ✅
- [x] 退款功能重复测试验证 ✅
- [x] 移动端拼车列表取消订单后未刷新问题 ✅
- [x] 我的拼车列表标签状态保持问题（从已取消标签返回时未停留在该标签）✅

## ⚠️ 待确认问题

| 问题描述 | 模块 | 状态 | 备注 |
|---------|------|------|------|
| ~~PC端拼车订单编号从60开始，移动端从567开始，存在编号重复风险~~ | ~~拼车订单编号~~ | ✅ **已解决** | 已找到原因并解决 |

---

## 🎯 测试结论

**全部问题已修复！** ✅

整体功能正常：
- 移动端核心流程（预约拼车、路线切换、协议查看）运行良好
- PC端所有模块访问正常
- 订单状态同步、支付流程、退款流程显示正常
- 退款功能联动正常：PC端订单管理点击退款，拼车订单状态同步变更
- 退款状态显示正常：移动端已取消订单详情页显示"已退款"（订单#58验证通过）
- 列表刷新正常：拼车订单取消后列表自动刷新
- 标签状态保持正常：从订单详情返回时停留在原标签

所有发现的问题已全部修复完毕。

---

## ✨ 功能优化记录

| 优化内容 | 模块 | 状态 |
|---------|------|------|
| 我的拼车列表卡片增加显示拼车订单号 | 移动端-我的拼车 | ✅ 已完成 |

