# MEMORY.md - Deployer é•¿æœŸè®°å¿†

## è§’è‰²å®šä¹‰

**å§“å**: Deployerï¼ˆéƒ¨ç½²è€…ï¼‰  
**è§’è‰²**: DevOps è¿ç»´å·¥ç¨‹å¸ˆ  
**Emoji**: ğŸš€  
**ä¸Šçº§**: å°dï¼ˆä¸»æ§ Agentï¼‰

---

## èŒè´£èŒƒå›´

1. **æœ¬åœ°éƒ¨ç½²** - å°†é€šè¿‡æµ‹è¯•çš„ä»£ç éƒ¨ç½²åˆ°æœ¬åœ°å¼€å‘ç¯å¢ƒ
2. **ç¯å¢ƒéªŒè¯** - ç¡®ä¿æœ¬åœ°éƒ¨ç½²æˆåŠŸã€æœåŠ¡æ­£å¸¸
3. **äººå·¥ç¡®è®¤** - é€šçŸ¥å°dè¿›è¡Œäººå·¥ç¡®è®¤
4. **ç”Ÿäº§éƒ¨ç½²** - äººå·¥ç¡®è®¤åéƒ¨ç½²åˆ°è¿œç¨‹ç”Ÿäº§æœåŠ¡å™¨
5. **ç›‘æ§éªŒè¯** - éªŒè¯ç”Ÿäº§ç¯å¢ƒè¿è¡Œæ­£å¸¸

---

## æ€§æ ¼ç‰¹å¾

- **è°¨æ…** - æ¯ä¸€æ­¥éƒ½å°å¿ƒéªŒè¯
- **ç¨³é‡** - ä¸å†’è¿›ï¼ŒæŒ‰éƒ¨å°±ç­
- **å¯é ** - éƒ¨ç½²ä¸å‡ºé”™
- **åº”æ€¥é¢„æ¡ˆ** - éšæ—¶å‡†å¤‡å›æ»š

**å£å¤´ç¦…**: 
- "å…ˆæœ¬åœ°éªŒè¯ï¼Œå†ç”Ÿäº§éƒ¨ç½²"
- "æ•°æ®åº“å¤‡ä»½äº†å—ï¼Ÿ"
- "å‡†å¤‡å°±ç»ªï¼Œç­‰å¾…äººå·¥ç¡®è®¤"

---

## å·¥ä½œç›®å½•

- **ä¸»ç›®å½•**: `/Users/asura.zhou/clawd/agents/deployer/workspace/`
- **é•¿æœŸè®°å¿†**: `/Users/asura.zhou/clawd/agents/deployer/workspace/MEMORY.md`
- **æ¯æ—¥è®°å½•**: `/Users/asura.zhou/clawd/agents/deployer/workspace/memory/`

---

## éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æœ¬åœ°éƒ¨ç½²
- [ ] åœæ­¢æ—§æœåŠ¡
- [ ] æ‹‰å–æœ€æ–°ä»£ç 
- [ ] å®‰è£…ä¾èµ–
- [ ] æ‰§è¡Œæ•°æ®åº“è¿ç§»
- [ ] æ„å»ºé¡¹ç›®
- [ ] å¯åŠ¨æ–°æœåŠ¡
- [ ] éªŒè¯æœåŠ¡çŠ¶æ€

### ç”Ÿäº§éƒ¨ç½²
- [ ] æ•°æ®åº“å¤‡ä»½
- [ ] æ‹‰å–ä»£ç 
- [ ] æ„å»º/éƒ¨ç½²
- [ ] æœåŠ¡é‡å¯
- [ ] å¥åº·æ£€æŸ¥

---

## é¡¹ç›®è¿ç»´ä¿¡æ¯

### æ¶¦å¾·æ•™è‚² (RunDeEdu)

**é¡¹ç›®è·¯å¾„**: `/Volumes/SanDisk2T/dv-codeBase/RunDeEdu/revenue-recognition-management/`

**éƒ¨ç½²æ–¹å¼**: Docker Compose (å¼€å‘ç¯å¢ƒ)

#### ğŸ³ å®¹å™¨åˆ—è¡¨

| å®¹å™¨å | è¯´æ˜ | ç«¯å£ |
|--------|------|------|
| backend-node-dev | åç«¯ Node.js API | 3001 |
| frontend-pc-dev | å‰ç«¯ Vite å¼€å‘æœåŠ¡å™¨ | 5173 |
| nginx-main-dev | Nginx åå‘ä»£ç† | 8080 |

#### ğŸŒ è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ |
|------|------|
| ä¸»é¡µé¢ | http://localhost:8080 |
| å‰ç«¯å¼€å‘æœåŠ¡å™¨ | http://localhost:5173 |
| åç«¯ API | http://localhost:3001 |

#### ğŸ“ å¸¸ç”¨è¿ç»´å‘½ä»¤

```bash
# åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•
cd /Volumes/SanDisk2T/dv-codeBase/RunDeEdu/revenue-recognition-management/

# å¯åŠ¨å¼€å‘ç¯å¢ƒ
./dev.sh start

# åœæ­¢å¼€å‘ç¯å¢ƒ
./dev.sh stop

# é‡å¯å¼€å‘ç¯å¢ƒ
./dev.sh restart

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
./dev.sh status

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
./dev.sh logs

# æŸ¥çœ‹åç«¯æ—¥å¿—
./dev.sh logs backend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
./dev.sh logs frontend

# æ¸…ç†å®¹å™¨å’Œèµ„æº
./dev.sh clean

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
./dev.sh rebuild
```

#### âš™ï¸ é…ç½®ä¿¡æ¯

- **Docker Compose æ–‡ä»¶**: `docker-compose.dev.local.yml`
- **é¡¹ç›®å**: `runde-dev-local`
- **Docker ç½‘ç»œ**: `revenue-recognition-network`

#### ğŸ’¡ è¿ç»´æç¤º

- ä»£ç ä¿®æ”¹ä¼šè‡ªåŠ¨çƒ­é‡è½½ï¼Œæ— éœ€é‡å¯å®¹å™¨
- å¼€å‘ç¯å¢ƒä½¿ç”¨æœ¬åœ°é•œåƒæ¨¡å¼å¯åŠ å¿«å¯åŠ¨é€Ÿåº¦ï¼š`./dev.sh start --local`
- macOS å¯è‡ªåŠ¨å¯åŠ¨ Dockerï¼š`./dev.sh start --docker`

---

## ğŸš€ ç”Ÿäº§éƒ¨ç½²ä¿¡æ¯

### ğŸ“ æœåŠ¡å™¨ä¿¡æ¯

| é¡¹ç›® | å€¼ |
|------|-----|
| ç›®æ ‡æœåŠ¡å™¨ | 183.6.3.201:22222 |
| éƒ¨ç½²ç›®å½• | /opt/lantel-runde-mgmt/ |
| Nginx ç«¯å£ | 8081 |

### ğŸ“¦ éƒ¨ç½²æµç¨‹ï¼ˆ3æ­¥ï¼‰

| æ­¥éª¤ | æ“ä½œ | è„šæœ¬ | æ‰§è¡Œä½ç½® |
|------|------|------|---------|
| 1ï¸âƒ£ | æ„å»º/æ‰“åŒ…é•œåƒ | `build-for-remote.sh` æˆ– `package-local-images.sh` | æœ¬åœ°å¼€å‘æœº |
| 2ï¸âƒ£ | ä¸Šä¼ åˆ°æœåŠ¡å™¨ | `upload-to-server.sh` | æœ¬åœ°å¼€å‘æœº |
| 3ï¸âƒ£ | éƒ¨ç½²å®¹å™¨ | `deploy-with-docker.sh` | è¿œç¨‹æœåŠ¡å™¨ |

### ğŸ³ ç”Ÿäº§ç¯å¢ƒå®¹å™¨é…ç½®

| å®¹å™¨ | å†…å­˜ | CPU | ç«¯å£ |
|------|------|-----|------|
| backend-node | 6GB | 2.0æ ¸ | 3001 |
| frontend-pc | 256MB | 0.25æ ¸ | 5173 |
| nginx | 512MB | 0.5æ ¸ | 8081 |

**Node.js å†…å­˜**: 5GB (`--max-old-space-size=5120`)

### ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps --filter "name=lantel-runde-mgmt"

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs lantel-runde-mgmt-backend

# é‡å¯å®¹å™¨
docker restart lantel-runde-mgmt-backend

# åœæ­¢æ‰€æœ‰å®¹å™¨
docker stop $(docker ps --filter "name=lantel-runde-mgmt" -q)

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats lantel-runde-mgmt-backend
```

### âš ï¸ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] æœåŠ¡å™¨ä¸Š `/opt/lantel-runde-mgmt/` ç›®å½•å·²å­˜åœ¨
- [ ] æœåŠ¡å™¨ä¸Šå·²å®‰è£… Docker
- [ ] ç«¯å£ 8081 æœªè¢«å ç”¨
- [ ] å·²å‡†å¤‡å¥½ `env.remote` ç¯å¢ƒå˜é‡æ–‡ä»¶
- [ ] å·²å‡†å¤‡å¥½æ•°æ®åº“é…ç½®æ–‡ä»¶
- [ ] æ•°æ®åº“å·²å¤‡ä»½
