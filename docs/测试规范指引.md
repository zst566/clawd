# 🧪 茂名文旅项目测试规范指引

**基于 2026-02-14 测试实践总结**

**文档版本**: v1.0  
**创建日期**: 2026-02-14  
**适用项目**: 茂名交投文旅平台（移动端H5 + PC管理端）

---

## 📋 文档说明

本文档基于 2026-02-14 全功能测试实践总结，提炼出标准化的测试工作流。适用于：
- 新功能开发后的验收测试
- 代码重构后的回归测试
- 定期全量功能检查
- 双端（移动端+PC端）联动功能验证

---

## 一、测试阶段划分（6个阶段）

### 🔷 阶段1：环境准备与自动化初筛（10%时间）

**目标**: 快速发现明显的页面级问题

| 步骤 | 操作 | 目的 | 工具/方法 |
|------|------|------|-----------|
| 1.1 | 启动开发环境 | 确保测试环境就绪 | Docker/本地启动 |
| 1.2 | 运行自动化测试 | 验证所有页面可访问 | Playwright |
| 1.3 | 全页面截图 | 检查页面是否空白/报错 | Playwright screenshot |
| 1.4 | 控制台错误检查 | 发现 JS 错误和 API 异常 | 浏览器 DevTools |

**输出物**:
- 测试报告（通过率统计）
- 问题截图
- 控制台错误日志

**实践案例**:
- PC端23个模块全部可访问（HTTP 200）
- 移动端14个模块全部可访问

---

### 🔷 阶段2：PC端功能遍历（20%时间）

**目标**: 检查PC管理端各模块功能完整性

**操作顺序**:
```
登录 → 左侧菜单逐个检查 → 右侧标签页点击 → 控制台观察
```

| 步骤 | 检查点 | 具体操作 | 通过标准 |
|------|--------|----------|----------|
| 2.1 | 登录功能 | 使用管理员账号登录 | 登录成功，进入仪表盘 |
| 2.2 | 左侧导航菜单 | 逐个点击每个模块 | 页面加载，无404错误 |
| 2.3 | 右侧标签页 | 每个模块的标签都点击 | 标签内容正常显示 |
| 2.4 | 控制台监控 | 观察Console面板 | 无红色错误，无API 500错误 |
| 2.5 | UI组件检查 | 检查过滤器、表格、按钮 | 布局正常，无样式错乱 |
| 2.6 | 表单验证 | 测试新增/编辑/删除 | 操作成功，数据保存 |

**问题记录模板**:
```markdown
| 问题描述 | 模块 | 现象 | 预期 | 实际 |
|---------|------|------|------|------|
| 过滤器宽度不够 | 景点管理 | 组件显示异常 | 正常宽度 | 宽度不足，文字截断 |
| 保存返回401 | 协议管理 | 无法保存修改 | 保存成功 | 后端返回401错误 |
```

**实践案例**:
- 发现景点管理过滤器宽度问题
- 发现协议管理保存401错误
- 23个模块全部通过可访问性测试

---

### 🔷 阶段3：移动端核心流程测试（40%时间）

**目标**: 验证移动端用户核心使用路径

**操作顺序**:
```
首页 → 功能入口 → 表单填写 → 组件交互 → 状态验证
```

| 步骤 | 测试内容 | 具体检查点 | 实践案例 |
|------|----------|------------|----------|
| 3.1 | 页面跳转 | 首页 → 景点拼车 | 跳转流畅，无白屏 |
| 3.2 | 表单完整性 | 输入框、按钮、提示 | 表单组件完整显示 |
| 3.3 | 路线切换 | 南站↔景点双向切换 | 标题切换正确 |
| 3.4 | 日期选择器 | 标题是否正确切换 | "高铁到达/出发时间"显示正确 |
| 3.5 | 地点选择 | 上下车点、详细地址 | 地点列表加载，地址对应正确 |
| 3.6 | 协议弹窗 | 能否正常打开关闭 | 协议内容可查看 |
| 3.7 | 提交功能 | 按钮是否可用 | 提交按钮可点击 |

**组件交互检查清单**:
```markdown
□ 选择器组件：选项是否正确，选中后是否生效
□ 日期组件：标题是否随路线切换变化
□ 弹窗组件：是否能正常打开关闭
□ 列表组件：下拉加载、空状态显示
□ 按钮组件：点击反馈、禁用状态
```

**实践案例**:
- 发现南站→景点方向时间选择组件识别问题
- 验证路线切换时日期标题正确变化
- 验证上下车点地址显示正确

---

### 🔷 阶段4：双端联动测试（核心，20%时间）

**目标**: 验证移动端和PC端数据同步和状态联动

**测试方法**: 一端操作，另一端验证

#### 4.1 移动端 → PC端验证

| 步骤 | 移动端操作 | PC端验证 | 同步检查 |
|------|-----------|----------|----------|
| 4.1.1 | 发起拼车订单 | 查看订单列表 | 订单出现在列表 |
| 4.1.2 | 填写交易单号 | 查看交易单号 | 单号显示一致 |
| 4.1.3 | - | 查看支付方式 | 显示"二维码" |
| 4.1.4 | - | 点击确认支付 | 按钮可点击，操作成功 |
| 4.1.5 | 查看订单状态 | 查看订单状态 | 两端状态一致 |

#### 4.2 PC端 → 移动端验证

| 步骤 | PC端操作 | 移动端验证 | 同步检查 |
|------|----------|-----------|----------|
| 4.2.1 | 修改订单状态为"待支付" | 刷新查看状态 | 状态同步为"待支付" |
| 4.2.2 | - | 查看金额显示 | 金额显示正确 |
| 4.2.3 | 点击退款 | - | 操作成功 |
| 4.2.4 | - | 查看退款状态 | 显示"已退款" |

#### 4.3 完整流程测试（订单生命周期）

**测试订单**: #56（支付流程）、#58（退款流程）

```markdown
订单#56 - 支付流程:
1. 移动端发起拼车 → 创建成功
2. PC端查看 → 订单可见
3. 移动端点击支付 → 填写交易单号
4. PC端刷新 → 显示交易单号，出现"确认支付"按钮（绿色）
5. PC端点击确认支付 → 支付状态变为"已支付"
6. 移动端查看 → 状态同步为"已支付"

订单#58 - 退款流程:
1. PC端订单管理 → 点击退款
2. 拼车订单状态 → 同步变更
3. 移动端查看 → 显示"已退款"
4. 显示效果 → 与预期一致
```

**关键检查点**:
- 数据一致性（金额、单号、状态）
- 操作联动性（一端操作，另一端感知）
- 状态同步时效（实时/准实时）

---

### 🔷 阶段5：边界与异常测试（5%时间）

**目标**: 发现边界条件下的问题

| 步骤 | 测试场景 | 操作步骤 | 预期结果 |
|------|----------|----------|----------|
| 5.1 | 列表刷新 | 取消订单后返回列表 | 列表自动刷新，显示最新状态 |
| 5.2 | 标签保持 | 从"已取消"进详情再返回 | 停留在"已取消"标签 |
| 5.3 | 下拉刷新 | 订单详情页下拉 | 触发刷新，数据更新 |
| 5.4 | 状态跳转 | 不同状态间切换 | 显示正确，数据一致 |
| 5.5 | 空数据处理 | 无数据时的列表显示 | 显示空状态提示 |
| 5.6 | 快速操作 | 连续快速点击按钮 | 防重复提交，无错误 |

**实践案例**:
- 发现列表未立即刷新问题
- 发现标签未保持问题
- 验证下拉刷新功能正常

---

### 🔷 阶段6：问题修复与回归验证（5%时间）

**目标**: 确保问题修复且不影响其他功能

| 步骤 | 操作 | 标准 |
|------|------|------|
| 6.1 | 问题记录与分配 | 记录问题描述、截图、复现步骤 |
| 6.2 | 修复验证 | 同样步骤再执行一次，确认修复 |
| 6.3 | 关联功能检查 | 检查修复是否影响其他相关功能 |
| 6.4 | 重复测试验证 | 对关键功能进行多次验证 |

**修复验证模板**:
```markdown
问题: [问题描述]
修复人: [负责人]
验证步骤:
1. [步骤1]
2. [步骤2]
3. [步骤3]
验证结果: ✅ 已修复 / ❌ 未修复
备注: [补充说明]
```

**实践案例**:
- 发起拼车组件识别问题：修复后重新测试南站→景点方向
- 退款功能：修复后进行重复测试验证
- 列表刷新：修复后验证取消订单后列表自动刷新

---

## 二、标准化测试工作流（可视化）

```
┌─────────────────────────────────────────────────────────┐
│  阶段1: 环境准备（10%）                                    │
│  ├─ 启动开发环境                                          │
│  ├─ 运行自动化测试（Playwright）                          │
│  └─ 全页面截图检查                                        │
├─────────────────────────────────────────────────────────┤
│  阶段2: PC端基础功能检查（20%）                            │
│  ├─ 登录系统                                              │
│  ├─ 左侧菜单遍历（每个模块点击）                          │
│  ├─ 右侧标签页检查（每个标签点击）                        │
│  └─ 控制台错误监控                                        │
├─────────────────────────────────────────────────────────┤
│  阶段3: 移动端核心流程测试（40%）                          │
│  ├─ 首页 → 功能入口                                       │
│  ├─ 表单填写与验证                                        │
│  ├─ 组件交互测试（切换、选择、弹窗）                      │
│  └─ 单端功能完整性确认                                    │
├─────────────────────────────────────────────────────────┤
│  阶段4: 双端联动测试（20%）★重点                           │
│  ├─ 移动端操作 → PC端验证                                 │
│  ├─ PC端操作 → 移动端验证                                 │
│  ├─ 状态同步检查                                          │
│  └─ 数据一致性验证                                        │
├─────────────────────────────────────────────────────────┤
│  阶段5: 边界条件测试（5%）                                 │
│  ├─ 列表刷新行为                                          │
│  ├─ 页面返回状态保持                                      │
│  ├─ 异常操作处理                                          │
│  └─ 状态跳转显示                                          │
├─────────────────────────────────────────────────────────┤
│  阶段6: 问题修复与回归验证（5%）                           │
│  ├─ 问题记录与分配                                        │
│  ├─ 修复后重复测试                                        │
│  └─ 关联功能回归验证                                      │
└─────────────────────────────────────────────────────────┘
```

---

## 三、测试检查清单模板

### 📋 PC端检查清单

```markdown
## PC端测试检查清单

### 基础功能
□ 登录功能正常（账号/密码/验证码）
□ 登录后跳转到仪表盘
□ 左侧导航菜单（共__个模块）
  □ 模块1: ____________
  □ 模块2: ____________
  □ ...
□ 右侧标签页点击无报错
□ 控制台无 JS 错误
□ 控制台无 API 500/404错误

### 各模块检查
□ 模块1: [名称]
  □ 列表加载正常
  □ 新增功能正常
  □ 编辑功能正常
  □ 删除功能正常
  □ 搜索/过滤正常
  □ 分页正常
□ 模块2: [名称]
  □ ...

### UI组件
□ 表格显示正常
□ 过滤器布局正常
□ 按钮可点击
□ 弹窗正常打开关闭
□ 表单验证正常
```

### 📋 移动端检查清单

```markdown
## 移动端测试检查清单

### 页面访问
□ 首页加载正常
□ 功能入口可点击
□ 页面跳转流畅（无白屏）

### 表单功能
□ 输入框可输入
□ 选择器可选择
□ 日期选择器正常
□ 提交按钮可用

### 组件交互
□ 路线切换正常
□ 地点选择正常
□ 协议弹窗可打开
□ 下拉刷新正常

### 状态显示
□ 订单状态正确
□ 金额显示正确
□ 时间显示正确
```

### 📋 双端联动检查清单

```markdown
## 双端联动测试检查清单

### 数据同步
□ 移动端创建 → PC端可见
□ PC端修改 → 移动端同步
□ 两端金额一致
□ 两端状态一致
□ 单号显示一致

### 支付流程
□ 移动端发起支付
□ PC端显示待支付
□ PC端确认支付
□ 移动端显示已支付

### 退款流程
□ PC端发起退款
□ 拼车订单状态变更
□ 移动端显示已退款
□ 退款金额正确

### 取消流程
□ 移动端取消订单
□ PC端状态同步
□ 列表刷新正常
```

### 📋 边界条件检查清单

```markdown
## 边界条件测试检查清单

### 列表与刷新
□ 新增后列表自动刷新
□ 删除后列表自动刷新
□ 修改后列表自动刷新
□ 取消后列表自动刷新
□ 下拉刷新功能正常
□ 上拉加载更多正常

### 页面状态
□ 从标签A进详情，返回停留在标签A
□ 从列表进详情，返回列表位置不变
□ 快速切换页面无错误
□ 重复点击按钮防重复

### 空数据与异常
□ 空列表显示友好提示
□ 网络异常提示正常
□ 操作失败有错误提示
□ 权限不足有提示
```

---

## 四、问题记录规范

### 问题记录模板

```markdown
## 问题记录

### 基本信息
- 发现问题时间: [YYYY-MM-DD HH:MM]
- 发现人: [姓名]
- 模块: [模块名称]
- 优先级: [P0紧急/P1高/P2中/P3低]

### 问题描述
**现象**: [看到了什么]
**操作路径**: [怎么操作出现的]
  1. [步骤1]
  2. [步骤2]
  3. [步骤3]

**预期结果**: [应该是什么]
**实际结果**: [实际是什么]

### 环境信息
- 浏览器: [Chrome/Firefox/Safari/微信内置浏览器]
- 操作系统: [Windows/macOS/iOS/Android]
- 屏幕尺寸: [如: 375x812]
- 网络环境: [WiFi/4G/5G]

### 附件
- 截图: [截图文件路径]
- 录屏: [录屏文件路径]
- 控制台日志: [日志内容或文件]

### 处理记录
- 分配人: [负责人]
- 状态: [待修复/修复中/已修复/已验证]
- 修复时间: [YYYY-MM-DD HH:MM]
- 修复说明: [修复内容简述]
- 验证人: [验证人]
- 验证结果: [通过/不通过]
```

### 问题统计表模板

```markdown
| 序号 | 问题描述 | 模块 | 优先级 | 状态 | 负责人 | 修复时间 |
|-----|---------|------|--------|------|--------|---------|
| 1 | [描述] | [模块] | P1 | ✅已修复 | Kimi | 2026-02-14 |
| 2 | [描述] | [模块] | P2 | 🔧修复中 | [负责人] | - |
```

---

## 五、场景化测试变体

### 场景A：新功能开发测试

**适用**: 新增功能模块、新增页面

**调整内容**:
- 阶段3权重提高到50%（重点测试新功能）
- 增加与现有功能的兼容性测试
- 增加边界条件测试权重

**检查重点**:
```markdown
□ 新功能与现有数据兼容
□ 新功能与现有功能不冲突
□ 权限控制正确
□ 新功能的增删改查完整
□ 新功能的双端同步（如涉及）
```

---

### 场景B：代码重构测试（如拆组件）

**适用**: 代码重构、组件拆分、性能优化

**调整内容**:
- 阶段2权重提高到40%（遍历所有模块）
- 阶段5权重提高到15%（重点测试边界）
- 增加重构前后的功能对比

**检查重点**:
```markdown
□ 所有原有功能正常
□ 页面加载性能不下降
□ 控制台无新错误
□ UI显示与重构前一致
□ 交互逻辑与重构前一致
```

---

### 场景C：Bug修复回归测试

**适用**: 修复线上问题后的验证

**调整内容**:
- 阶段6权重提高到30%
- 重点验证修复的问题
- 重点检查关联功能

**检查重点**:
```markdown
□ 原问题已修复
□ 同样操作不会复现
□ 关联功能未受影响
□ 修复未引入新问题
□ 边界条件测试通过
```

---

### 场景D：发布前全量回归测试

**适用**: 版本发布前的完整测试

**执行方式**:
- 完整执行6个阶段
- 每个阶段按标准权重执行
- 生成完整测试报告

---

## 六、最佳实践总结

### 从本次测试提炼的经验

#### 1. 双端联动测试法是核心

**优势**:
- 同时验证移动端和PC端
- 发现数据同步问题
- 验证业务流程完整性

**实施要点**:
- 使用真实订单（如#56、#58）而非测试数据
- 覆盖完整的订单生命周期（创建→支付→退款）
- 双向验证（移动端操作→PC端验证，反之亦然）

#### 2. 问题发现与修复的闭环

**流程**:
```
发现问题 → 记录 → 分配 → 修复 → 验证 → 关闭
```

**关键**:
- 即时记录（发现后立即记录）
- 详细描述（现象、路径、预期、实际）
- 修复后必须验证
- 关联功能必须检查

#### 3. 控制台监控不可忽视

**检查内容**:
- JavaScript 错误（红色）
- API 请求失败（4xx/5xx）
- 警告信息（黄色）
- 性能问题（慢请求）

#### 4. 边界条件容易遗漏

**常见边界**:
- 列表刷新时机
- 页面返回状态
- 空数据处理
- 快速重复操作

---

## 七、附录

### A. 测试工具推荐

| 工具 | 用途 | 使用场景 |
|------|------|----------|
| Playwright | 自动化测试 | 阶段1初筛、回归测试 |
| Chrome DevTools | 调试监控 | 阶段2控制台检查 |
| Postman | API测试 | 接口验证 |
| Charles/Fiddler | 抓包分析 | 网络请求分析 |

### B. 测试数据准备

**建议准备的数据**:
- 超级管理员账号（PC端）
- 普通用户账号（移动端）
- 测试用订单（不同状态：待支付、已支付、已取消、已退款）
- 边界数据（空列表、超长内容、特殊字符）

### C. 测试环境要求

- 开发环境必须最新代码
- 数据库有基础测试数据
- 移动端和PC端可正常访问
- 网络连接正常

---

**文档维护**: 根据每次测试实践持续优化  
**下次评审**: 建议每季度评审一次测试规范

---

## 相关文档

- 详细测试记录: `memory/2026-02-14-testing.md`
- 测试总结报告: `memory/2026-02-14-testing-summary.md`
- 测试脚本: `apps/mobile-h5/comprehensive-test.cjs`
